{"ast":null,"code":"var _jsxFileName = \"/Users/Owner/Desktop/hackathon_muta/hackathon2/my-app-ts/src/GetMessages.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport EditMessage from \"./editMessage\";\nimport DeleteMessage from './deleteMessage';\nimport CreateMessage from './CreateMessage';\n// import {setChannelId} from './GetUserChannels3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MessageList = _ref => {\n  _s();\n  let {\n    channelId\n  } = _ref;\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const HandleGetMessages = async channelId => {\n    try {\n      setLoading(true);\n      const fetchUserData = async () => {\n        try {\n          const response = await axios.get(`http://ocalhost:8081/messages?channel_id=${channelId}`);\n          setMessages(response.data);\n          setLoading(false);\n        } catch (error) {\n          setError(\"Failed to fetch user data\");\n          setLoading(false);\n        }\n      };\n      fetchUserData();\n      if (loading) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 24\n        }, this);\n      }\n      if (error) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Error: \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 24\n        }, this);\n      }\n      // const response = await axios.get(`localhost:8081/messages?channel_id=${channelId}`);\n      // setMessages(response.data);\n      // setLoading(false);\n      setError('');\n    } catch (error) {\n      setLoading(false);\n      if (axios.isAxiosError(error)) {\n        const axiosError = error;\n        if (axiosError.response) {\n          setError(axiosError.response.data.error);\n        } else {\n          setError('Failed to fetch messages');\n        }\n      } else {\n        setError('Failed to fetch messages');\n      }\n    }\n  };\n  useEffect(() => {\n    HandleGetMessages(channelId);\n  }, [channelId]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 16\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Message ID: \", message.message_id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Channel ID: \", message.channel_id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"User ID: \", message.user_id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Content: \", message.content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Edited At: \", message.edited_at || 'Not edited']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(EditMessage\n      //messageId={message.message_id}\n      , {\n        onEditSuccess: () => HandleGetMessages(channelId)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(DeleteMessage, {\n        messageId: message.message_id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }, this)]\n    }, message.message_id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(CreateMessage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n};\n_s(MessageList, \"9fXYnnLol0BPoYLrwWFeq8HynnU=\");\n_c = MessageList;\nexport default MessageList;\nvar _c;\n$RefreshReg$(_c, \"MessageList\");","map":{"version":3,"names":["React","useEffect","useState","axios","EditMessage","DeleteMessage","CreateMessage","jsxDEV","_jsxDEV","MessageList","_ref","_s","channelId","messages","setMessages","loading","setLoading","error","setError","HandleGetMessages","fetchUserData","response","get","data","children","fileName","_jsxFileName","lineNumber","columnNumber","isAxiosError","axiosError","map","message","message_id","channel_id","user_id","content","edited_at","onEditSuccess","messageId","_c","$RefreshReg$"],"sources":["/Users/Owner/Desktop/hackathon_muta/hackathon2/my-app-ts/src/GetMessages.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios, { AxiosError } from 'axios';\nimport EditMessage from \"./editMessage\"\nimport DeleteMessage from './deleteMessage';\nimport CreateMessage from './CreateMessage';\n// import {setChannelId} from './GetUserChannels3';\nimport { useParams } from 'react-router-dom';\nimport { setChannelId } from './GetUserChannels3';\n\n\n\ninterface Message {\n    message_id: string;\n    channel_id: number;\n    user_id: string;\n    content: string;\n    edited_at: string | null;\n}\n\ninterface Props {\n    channelId: any;\n}\n\n\nconst MessageList: React.FC<Props> = ({channelId}) => {\n    const [messages, setMessages] = useState<Message[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState<string>('');\n\n    const HandleGetMessages = async (channelId: number) => {\n        try {\n            setLoading(true);\n            const fetchUserData = async () => {\n                try {\n                  const response = await axios.get(\n                    `http://ocalhost:8081/messages?channel_id=${channelId}`\n                  );\n                  setMessages(response.data);\n                  setLoading(false);\n\n                } catch (error) {\n                  setError(\"Failed to fetch user data\");\n                  setLoading(false);\n                }\n              };\n\n              fetchUserData();\n\n              if (loading) {\n                return <div>Loading...</div>;\n              }\n            \n              if (error) {\n                return <div>Error: {error}</div>;\n              }\n            // const response = await axios.get(`localhost:8081/messages?channel_id=${channelId}`);\n            // setMessages(response.data);\n            // setLoading(false);\n            setError('');\n        } catch (error) {\n            setLoading(false);\n            if (axios.isAxiosError(error)) {\n                const axiosError = error as AxiosError;\n                if (axiosError.response) {\n                    setError((axiosError.response.data as { error: string }).error);\n                } else {\n                    setError('Failed to fetch messages');\n                }\n            } else {\n                setError('Failed to fetch messages');\n            }\n        }\n    };\n\n    useEffect(() => {\n        HandleGetMessages(channelId);\n    }, [channelId]);\n\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n\n    if (error) {\n        return <div>Error: {error}</div>;\n    }\n\n    return (\n        <div>\n            {messages.map((message) => (\n                <div key={message.message_id}>\n                    <p>Message ID: {message.message_id}</p>\n                    <p>Channel ID: {message.channel_id}</p>\n                    <p>User ID: {message.user_id}</p>\n                    <p>Content: {message.content}</p>\n                    <p>Edited At: {message.edited_at || 'Not edited'}</p>\n                    <EditMessage\n                        //messageId={message.message_id}\n                        onEditSuccess={() => HandleGetMessages(channelId)}\n                    />\n                    <DeleteMessage messageId={message.message_id} />\n                </div>   \n            ))}\n            <CreateMessage />\n        </div>\n    );\n};\n\nexport default MessageList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}