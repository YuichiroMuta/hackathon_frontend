{"ast":null,"code":"var _jsxFileName = \"/Users/Owner/Desktop/hackathon_muta/hackathon2/my-app-ts/src/GetMessages.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport CreateMessage from './CreateMessage';\n// import {setChannelId} from './GetUserChannels3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MessageList = _ref => {\n  _s();\n  let {\n    channelId\n  } = _ref;\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const HandleGetMessages = async channelId => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`http://localhost:8081/messages?channel_id=${channelId}`);\n      setMessages(response.data);\n      setLoading(false);\n      setError('');\n    } catch (error) {\n      setLoading(false);\n      if (axios.isAxiosError(error)) {\n        const axiosError = error;\n        if (axiosError.response) {\n          setError(axiosError.response.data.error);\n        } else {\n          setError('Failed to fetch messages');\n        }\n      } else {\n        setError('Failed to fetch messages');\n      }\n    }\n  };\n  useEffect(() => {\n    HandleGetMessages(channelId);\n  }, [channelId]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 16\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(CreateMessage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n_s(MessageList, \"9fXYnnLol0BPoYLrwWFeq8HynnU=\");\n_c = MessageList;\nexport default MessageList;\nvar _c;\n$RefreshReg$(_c, \"MessageList\");","map":{"version":3,"names":["React","useEffect","useState","axios","CreateMessage","jsxDEV","_jsxDEV","MessageList","_ref","_s","channelId","messages","setMessages","loading","setLoading","error","setError","HandleGetMessages","response","get","data","isAxiosError","axiosError","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/Owner/Desktop/hackathon_muta/hackathon2/my-app-ts/src/GetMessages.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios, { AxiosError } from 'axios';\nimport EditMessage from \"./editMessage\"\nimport DeleteMessage from './deleteMessage';\nimport CreateMessage from './CreateMessage';\n// import {setChannelId} from './GetUserChannels3';\nimport { useParams } from 'react-router-dom';\nimport { setChannelId } from './GetUserChannels3';\n\n\n\ninterface Message {\n    message_id: string;\n    channel_id: number;\n    user_id: string;\n    content: string;\n    edited_at: string | null;\n}\n\ninterface Props {\n    channelId: any;\n}\n\n\nconst MessageList: React.FC<Props> = ({channelId}) => {\n    const [messages, setMessages] = useState<Message[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState<string>('');\n\n    const HandleGetMessages = async (channelId: number) => {\n        try {\n            setLoading(true);\n            const response = await axios.get(`http://localhost:8081/messages?channel_id=${channelId}`);\n            setMessages(response.data);\n            setLoading(false);\n            setError('');\n        } catch (error) {\n            setLoading(false);\n            if (axios.isAxiosError(error)) {\n                const axiosError = error as AxiosError;\n                if (axiosError.response) {\n                    setError((axiosError.response.data as { error: string }).error);\n                } else {\n                    setError('Failed to fetch messages');\n                }\n            } else {\n                setError('Failed to fetch messages');\n            }\n        }\n    };\n\n    useEffect(() => {\n        HandleGetMessages(channelId);\n    }, [channelId]);\n\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n\n    if (error) {\n        return <div>Error: {error}</div>;\n    }\n\n    return (\n        <div>\n            {/* {messages.map((message) => (\n                <div key={message.message_id}>\n                    <p>Message ID: {message.message_id}</p>\n                    <p>Channel ID: {message.channel_id}</p>\n                    <p>User ID: {message.user_id}</p>\n                    <p>Content: {message.content}</p>\n                    <p>Edited At: {message.edited_at || 'Not edited'}</p>\n                    <EditMessage\n                        //messageId={message.message_id}\n                        onEditSuccess={() => HandleGetMessages(channelId)}\n                    />\n                    <DeleteMessage messageId={message.message_id} />\n                </div>   \n            ))} */}\n            <CreateMessage />\n        </div>\n    );\n};\n\nexport default MessageList;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAsB,OAAO;AAGzC,OAAOC,aAAa,MAAM,iBAAiB;AAC3C;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAmBA,MAAMC,WAA4B,GAAGC,IAAA,IAAiB;EAAAC,EAAA;EAAA,IAAhB;IAACC;EAAS,CAAC,GAAAF,IAAA;EAC7C,MAAM,CAACG,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAY,EAAE,CAAC;EACvD,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAS,EAAE,CAAC;EAE9C,MAAMe,iBAAiB,GAAG,MAAOP,SAAiB,IAAK;IACnD,IAAI;MACAI,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMI,QAAQ,GAAG,MAAMf,KAAK,CAACgB,GAAG,CAAE,6CAA4CT,SAAU,EAAC,CAAC;MAC1FE,WAAW,CAACM,QAAQ,CAACE,IAAI,CAAC;MAC1BN,UAAU,CAAC,KAAK,CAAC;MACjBE,QAAQ,CAAC,EAAE,CAAC;IAChB,CAAC,CAAC,OAAOD,KAAK,EAAE;MACZD,UAAU,CAAC,KAAK,CAAC;MACjB,IAAIX,KAAK,CAACkB,YAAY,CAACN,KAAK,CAAC,EAAE;QAC3B,MAAMO,UAAU,GAAGP,KAAmB;QACtC,IAAIO,UAAU,CAACJ,QAAQ,EAAE;UACrBF,QAAQ,CAAEM,UAAU,CAACJ,QAAQ,CAACE,IAAI,CAAuBL,KAAK,CAAC;QACnE,CAAC,MAAM;UACHC,QAAQ,CAAC,0BAA0B,CAAC;QACxC;MACJ,CAAC,MAAM;QACHA,QAAQ,CAAC,0BAA0B,CAAC;MACxC;IACJ;EACJ,CAAC;EAEDf,SAAS,CAAC,MAAM;IACZgB,iBAAiB,CAACP,SAAS,CAAC;EAChC,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;EAEf,IAAIG,OAAO,EAAE;IACT,oBAAOP,OAAA;MAAAiB,QAAA,EAAK;IAAU;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAChC;EAEA,IAAIZ,KAAK,EAAE;IACP,oBAAOT,OAAA;MAAAiB,QAAA,GAAK,SAAO,EAACR,KAAK;IAAA;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EACpC;EAEA,oBACIrB,OAAA;IAAAiB,QAAA,eAeIjB,OAAA,CAACF,aAAa;MAAAoB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAChB,CAAC;AAEd,CAAC;AAAClB,EAAA,CA1DIF,WAA4B;AAAAqB,EAAA,GAA5BrB,WAA4B;AA4DlC,eAAeA,WAAW;AAAC,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}